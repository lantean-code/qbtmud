@inherits Options

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4 mt-4">
    <MudCardContent>
        <MudGrid>
            <MudItem xs="12">
                <MudSelect T="int" Label="Peer connection protocol" Value="BittorrentProtocol" ValueChanged="BittorrentProtocolChanged" ShrinkLabel Variant="Variant.Outlined">
                    <MudSelectItem T="int" Value="0">TCP and μTP</MudSelectItem>
                    <MudSelectItem T="int" Value="1">TCP</MudSelectItem>
                    <MudSelectItem T="int" Value="2">μTP</MudSelectItem>
                </MudSelect>
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Listening Port</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="10">
                <MudNumericField T="int" Label="Port used for incoming connections" Value="ListenPort" ValueChanged="ListenPortChanged" Min="@MinPortValue" Max="@MaxPortValue" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="1">
                <MudButton OnClick="GenerateRandomPort" Variant="Variant.Filled" FullWidth="true">Random</MudButton>
            </MudItem>
            <MudItem xs="1">
                <MudButton OnClick="UseSystemPort" Variant="Variant.Filled" FullWidth="true">Let System Decide</MudButton>
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Use UPnp / NAT-PMP port forwarding from my router" Value="Upnp" ValueChanged="UpnpChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Connections Limits</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12" md="6">
                <MudCheckBox T="bool" Label="Global maximum number of connections" Value="MaxConnecEnabled" ValueChanged="MaxConnecEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudNumericField T="int" Label="Connections" Value="MaxConnec" ValueChanged="MaxConnecChanged" Min="1" Disabled="@(!MaxConnecEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudCheckBox T="bool" Label="Maximum number of connections per torrent" Value="MaxConnecPerTorrentEnabled" ValueChanged="MaxConnecPerTorrentEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudNumericField T="int" Label="Connections" Value="MaxConnecPerTorrent" ValueChanged="MaxConnecPerTorrentChanged" Min="1" Disabled="@(!MaxConnecPerTorrentEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudCheckBox T="bool" Label="Global maximum number of upload slots" Value="MaxUploadsEnabled" ValueChanged="MaxUploadsEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudNumericField T="int" Label="Slots" Value="MaxUploads" ValueChanged="MaxUploadsChanged" Min="1" Disabled="@(!MaxUploadsEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudCheckBox T="bool" Label="Maximum number of upload slots per torrent" Value="MaxUploadsPerTorrentEnabled" ValueChanged="MaxUploadsPerTorrentEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudNumericField T="int" Label="Slots" Value="MaxUploadsPerTorrent" ValueChanged="MaxUploadsPerTorrentChanged" Disabled="@(!MaxUploadsPerTorrentEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="I2P (Experimental)" Value="I2pEnabled" ValueChanged="I2pEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudTextField T="string" Label="Host" Value="I2pAddress" ValueChanged="I2pAddressChanged" Disabled="@(!I2pEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudNumericField T="int" Label="Slots" Value="I2pPort" ValueChanged="I2pPortChanged" Min="0" Max="65535" Disabled="@(!I2pEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Mixed mode" Value="I2pMixedMode" ValueChanged="I2pMixedModeChanged" Disabled="@(!I2pEnabled)" LabelPosition="LabelPosition.End" title="If &quot;mixed mode&quot; is enabled, I2P torrents are allowed to also get peers from other sources than the tracker, and connect to regular IPs, not providing any anonymization. This may be useful if the user is not interested in the anonymization of I2P, but still wants to be able to connect to I2P peers." />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Proxy Server</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12" md="4">
                <MudSelect T="string" Label="Type" Value="ProxyType" ValueChanged="ProxyTypeChanged" ShrinkLabel Variant="Variant.Outlined">
                    <MudSelectItem T="string" Value="@("None")">None</MudSelectItem>
                    <MudSelectItem T="string" Value="@("SOCKS4")">SOCKS4</MudSelectItem>
                    <MudSelectItem T="string" Value="@("SOCKS5")">SOCKS5</MudSelectItem>
                    <MudSelectItem T="string" Value="@("HTTP")">HTTP</MudSelectItem>
                </MudSelect>
            </MudItem>
            <MudItem xs="12" md="4">
                <MudTextField T="string" Label="Host" Value="ProxyIp" ValueChanged="ProxyIpChanged" Disabled="ProxyDisabled" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="4">
                <MudNumericField T="int" Label="Port" Value="ProxyPort" ValueChanged="ProxyPortChanged" Min="@ConnectionOptions.MinPortValue" Max="@ConnectionOptions.MaxPortValue" Disabled="ProxyDisabled" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Perform hostname lookup via proxy" Value="ProxyHostnameLookup" ValueChanged="ProxyHostnameLookupChanged" LabelPosition="LabelPosition.End" title="If checked, hostname lookups are done via the proxy." />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Authentication" Value="ProxyAuthEnabled" ValueChanged="ProxyAuthEnabledChanged" LabelPosition="LabelPosition.End" Disabled="@(ProxyDisabled || ProxySocks4)" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudTextField T="string" Label="Username" Value="ProxyUsername" ValueChanged="ProxyUsernameChanged" Disabled="@(ProxyDisabled || ProxySocks4)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudTextField T="string" Label="Password" Value="ProxyPassword" ValueChanged="ProxyPasswordChanged" Disabled="@(ProxyDisabled || ProxySocks4)" ShrinkLabel Variant="Variant.Outlined"/>
            </MudItem>
            <MudItem xs="12">
                <MudAlert Severity="Severity.Info">Info: The password is saved unencrypted</MudAlert>
            </MudItem>

            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Use proxy for BitTorrent purposes" Value="ProxyBittorrent" ValueChanged="ProxyBittorrentChanged" LabelPosition="LabelPosition.End" Disabled="ProxyDisabled" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Use proxy for peer connections" Value="ProxyPeerConnections" ValueChanged="ProxyPeerConnectionsChanged" LabelPosition="LabelPosition.End" Disabled="@(ProxyDisabled || ProxyAuthEnabled)" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Use proxy for RSS purposes" Value="ProxyRss" ValueChanged="ProxyRssChanged" LabelPosition="LabelPosition.End" Disabled="@(ProxyDisabled || ProxySocks4)" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Use proxy for general purposes" Value="ProxyMisc" ValueChanged="ProxyMiscChanged" LabelPosition="LabelPosition.End" Disabled="@(ProxyDisabled || ProxySocks4)" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">IP Filtering</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="IP Filter" Value="IpFilterEnabled" ValueChanged="IpFilterEnabledChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Filter path (.dat, .p2p, .p2b)" Value="IpFilterPath" ValueChanged="IpFilterPathChanged" Disabled="@(!IpFilterEnabled)" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="12">
                <MudCheckBox T="bool" Label="Apply to trackers" Value="IpFilterTrackers" ValueChanged="IpFilterTrackersChanged" LabelPosition="LabelPosition.End" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Manually banned IP addresses" Value="BannedIPs" ValueChanged="BannedIPsChanged" Lines="5" ShrinkLabel Variant="Variant.Outlined" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>