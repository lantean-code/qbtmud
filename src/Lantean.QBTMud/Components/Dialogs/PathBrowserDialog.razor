@using Lantean.QBTMud.Helpers

<MudDialog Class="path-browser-dialog">
    <DialogContent>
        <div class="path-browser-dialog__content">
            <MudGrid>
                <MudItem xs="12">
                <MudTextField Label="Current path"
                              Value="_currentPath"
                              ValueChanged="@(async (string value) => await PathChanged(value))"
                              Variant="Variant.Outlined"
                              ShrinkLabel="true"
                              Immediate="true" />
            </MudItem>
                <MudItem xs="12">
                    <MudButtonGroup>
                        <MudIconButton Icon="@Icons.Material.Filled.ArrowUpward" Disabled="@(!CanNavigateUp)" OnClick="NavigateUp" title="Up" />
                        <MudIconButton Icon="@Icons.Material.Filled.Refresh" Disabled="@IsLoading" OnClick="Reload" title="Refresh" />
                    </MudButtonGroup>
                </MudItem>
                <MudItem xs="12">
                    <div class="path-browser-dialog__list">
                        @if (IsLoading)
                        {
                            <MudProgressLinear Indeterminate="true" />
                        }
                        else if (!string.IsNullOrWhiteSpace(LoadError))
                        {
                            <MudAlert Severity="Severity.Error">@LoadError</MudAlert>
                        }
                        else if (_entries.Count == 0)
                        {
                            <MudText>No items.</MudText>
                        }
                        else
                        {
                            <MudList T="string" Dense="true">
                                @foreach (var entry in _entries)
                                {
                                    <MudListItem T="string" OnClick="@(() => EntryClicked(entry))" Icon="@(entry.IsDirectory? Icons.Material.Filled.Folder : Icons.Material.Filled.InsertDriveFile)" Text="@entry.Name" />
                                }
                            </MudList>
                        }
                    </div>
                </MudItem>
            </MudGrid>
        </div>
    </DialogContent>
    <DialogActions>
        <MudButton Disabled="@(!CanSelectFolder)" OnClick="SelectCurrentFolder">Select folder</MudButton>
        <MudButton OnClick="Cancel">Close</MudButton>
    </DialogActions>
</MudDialog>
