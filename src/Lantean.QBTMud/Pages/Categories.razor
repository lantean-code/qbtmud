@page "/categories"
@layout OtherLayout
<div class="content-panel">
    <div class="content-panel__toolbar">
        <MudToolBar Gutters="false" Dense="true">
            @if (!DrawerOpen)
            {
                <MudIconButton Icon="@Icons.Material.Outlined.NavigateBefore" OnClick="NavigateBack" title="Back to torrent list" />
                <MudDivider Vertical="true" />
            }
            <MudText Class="px-5 no-wrap">@LanguageLocalizer.Translate("TransferListFiltersWidget", "Categories")</MudText>
            <MudDivider Vertical="true" />
            <MudIconButton Icon="@Icons.Material.Filled.PlaylistAdd" OnClick="AddCategory" title="@LanguageLocalizer.Translate("CategoryFilterWidget", "New Category")" />
            <MudIconButton Icon="@Icons.Material.Filled.Refresh" OnClick="Reload" title="@LanguageLocalizer.Translate("AppCookies", "Refresh")" />
        </MudToolBar>
    </div>

    <div class="content-panel__body">
        <DynamicTable @ref="Table"
                      TableId="Categories"
                      T="Category"
                      ColumnDefinitions="Columns"
                      Items="Results"
                      MultiSelection="false"
                      SelectOnRowClick="false"
                      Class="details-list content-panel__table" />
    </div>
</div>

@code {
    private RenderFragment<RowContext<Category>> ActionsColumn
    {
        get
        {
            return context => __builder =>
            {
                <MudButtonGroup Variant="Variant.Outlined">
                    <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Warning" OnClick="@(e => EditCategory(context.Data.Name))" />
                    <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="@(e => DeleteCategory(context.Data.Name))" />
                </MudButtonGroup>
                ;
            };
        }
    }
}
