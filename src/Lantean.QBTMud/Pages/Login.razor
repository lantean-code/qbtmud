@page "/login"
@layout MainLayout
<PageTitle>@WebUiLocalizer.Translate("Login", "Login")</PageTitle>

<div class="login-root">
    <MudMainContent Class="login-page">
        <MudContainer MaxWidth="MaxWidth.Small" Class="login-page__container">
            <MudCard Class="login-card mt-3" Elevation="6">
                <MudCardContent Class="login-card__content">
                    <MudStack Spacing="2">
                        <div class="login-card__header">
                            <img src="images/qbittorrent32.png" alt="" class="login-card__logo" />
                            <MudText Typo="Typo.h5">@WebUiLocalizer.Translate("Login", "Login")</MudText>
                        </div>

                        @if (ApiError is not null)
                        {
                            <MudAlert Severity="Severity.Error"
                                      Variant="Variant.Filled"
                                      Dense="true"
                                      data-test-id="@TestIdHelper.For("LoginError")">@ApiError</MudAlert>
                        }

                        <EditForm Model="Model" OnValidSubmit="LoginClick">
                            <DataAnnotationsValidator />
                            <MudStack Spacing="2" Class="login-card__form">
                                <MudTextField Label="@WebUiLocalizer.Translate("Login", "Username")"
                                              @bind-Value="Model.Username"
                                              For="@(() => Model.Username)"
                                              Variant="Variant.Outlined"
                                              ShrinkLabel="true"
                                              Adornment="Adornment.Start"
                                              AdornmentIcon="@Icons.Material.Filled.Person"
                                              Disabled="@IsSubmitting"
                                              data-test-id="@TestIdHelper.For("Username")" />
                                <MudTextField Label="@WebUiLocalizer.Translate("Login", "Password")"
                                              @bind-Value="Model.Password"
                                              For="@(() => Model.Password)"
                                              InputType="@PasswordInputType"
                                              Variant="Variant.Outlined"
                                              ShrinkLabel="true"
                                              Adornment="Adornment.End"
                                              AdornmentIcon="@PasswordAdornmentIcon"
                                              OnAdornmentClick="TogglePasswordVisibility"
                                              Disabled="@IsSubmitting"
                                              data-test-id="@TestIdHelper.For("Password")" />
                                <MudButton Color="Color.Primary"
                                           Variant="Variant.Filled"
                                           ButtonType="ButtonType.Submit"
                                           FullWidth="true"
                                           Disabled="@IsSubmitting"
                                           data-test-id="@TestIdHelper.For("Login")">@WebUiLocalizer.Translate("Login", "Login")</MudButton>
                            </MudStack>
                        </EditForm>
                    </MudStack>
                </MudCardContent>
            </MudCard>
        </MudContainer>
    </MudMainContent>
</div>
